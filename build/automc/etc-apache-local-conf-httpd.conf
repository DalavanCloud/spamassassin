# Included on the zone from /etc/apache2/httpd.conf:
#   Include /etc/apache/local-conf/httpd.conf
#
# Update Apache config like so:
# 
#   cd /home/automc/svn/spamassassin; sudo -u automc svn up

# May 12 2005 jm
<IfModule mod_dir.c>
    DirectoryIndex index.html index.htm index.shtml index.php index.php4 index.php3 index.phtml index.cgi
</IfModule>

UseCanonicalName On

NameVirtualHost *:80

ScriptAlias /ruleqa "/home/automc/svn/spamassassin/masses/rule-qa/automc/ruleqa.cgi"

<VirtualHost *:80>
  ServerName buildbot.spamassassin.org
  <Directory /var/www/buildbot.spamassassin.org>
    options indexes SymLinksIfOwnerMatch
    AllowOverride indexes
  </Directory>
  DocumentRoot /var/www/buildbot.spamassassin.org
  ServerAdmin webmaster@spamassassin.org
  userdir disabled
</VirtualHost>

<VirtualHost *:80>
  ServerName rsync.spamassassin.org
  <Directory /home/corpus-rsync/corpus>
    options indexes SymLinksIfOwnerMatch
    AllowOverride indexes
  </Directory>
  DocumentRoot /home/corpus-rsync/corpus
  ServerAdmin webmaster@spamassassin.org
  userdir disabled
</VirtualHost>

# jm nov 7 ; proxy to :8010, :8011 from here
ProxyRequests Off
<Proxy *>
Order deny,allow
Allow from all
</Proxy>

# jm dec 9 : proxy shouldn't wait for EOF, we want partial files too
# SetEnv force-proxy-request-1.0 1
SetEnv proxy-nokeepalive 1

# try to cause more frequent buf writes with a tiny buf size
ProxyIOBufferSize 16

ProxyPass /bb/ http://localhost:8010/
ProxyPassReverse /bb/ http://localhost:8010/

ProxyPass /preflight/ http://localhost:8011/
ProxyPassReverse /preflight/ http://localhost:8011/

ProxyPass /buildbot.css http://localhost:8010/buildbot.css
ProxyPassReverse /buildbot.css http://localhost:8010/buildbot.css

Redirect /bb http://buildbot.spamassassin.org/bb/
Redirect /preflight http://buildbot.spamassassin.org/preflight/

Redirect /index.html http://wiki.apache.org/spamassassin/BuildBotIndex

